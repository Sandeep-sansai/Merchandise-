Here’s an Angular implementation for the described flight booking component using Material modules and fetching the flightId and userId dynamically.

Prerequisites:
	1.	Make sure you have Angular Material installed:

ng add @angular/material


	2.	Backend APIs:
	•	Fetch flights: GET /api/flights
	•	Create booking: POST /api/bookings
	•	Fetch booking by ID: GET /api/bookings/{bookingId}
	•	Get logged-in user details: GET /api/users/current

Flight Booking Component

HTML: flight-booking.component.html

<div class="booking-container" fxLayout="column" fxLayoutAlign="center center">
  <h2>Flight Booking</h2>
  <form [formGroup]="bookingForm" (ngSubmit)="submitBooking()">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Passenger Name</mat-label>
      <input matInput formControlName="passengerName" required />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Address</mat-label>
      <textarea matInput formControlName="address" rows="3" required></textarea>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Email</mat-label>
      <input matInput type="email" formControlName="email" required />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Phone Number</mat-label>
      <input matInput type="tel" formControlName="phoneNumber" required />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Number of Seats</mat-label>
      <input matInput type="number" formControlName="numSeats" required />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Seat Numbers (comma-separated)</mat-label>
      <input matInput formControlName="seatNumbers" required />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width" disabled>
      <mat-label>Flight Number</mat-label>
      <input matInput [value]="selectedFlight?.flightNumber" disabled />
    </mat-form-field>

    <button mat-raised-button color="primary" type="submit" [disabled]="bookingForm.invalid">
      Book Now
    </button>
  </form>
</div>

<div *ngIf="successMessage" class="success-container" fxLayout="column" fxLayoutAlign="center center">
  <mat-icon color="primary" fontSize="48px">check_circle</mat-icon>
  <h3>{{ successMessage }}</h3>
  <button mat-raised-button color="accent" (click)="viewMyBooking()">View My Booking</button>
</div>

TS: flight-booking.component.ts

import { Component, OnInit } from '@angular/core';
import { FormBuilder, FormGroup, Validators } from '@angular/forms';
import { MatSnackBar } from '@angular/material/snack-bar';
import { BookingService } from '../services/booking.service';
import { AuthService } from '../services/auth.service';
import { ActivatedRoute } from '@angular/router';

@Component({
  selector: 'app-flight-booking',
  templateUrl: './flight-booking.component.html',
  styleUrls: ['./flight-booking.component.css'],
})
export class FlightBookingComponent implements OnInit {
  bookingForm: FormGroup;
  successMessage: string | null = null;
  selectedFlight: any;
  currentUserId: string;

  constructor(
    private fb: FormBuilder,
    private bookingService: BookingService,
    private authService: AuthService,
    private route: ActivatedRoute,
    private snackBar: MatSnackBar
  ) {}

  ngOnInit(): void {
    this.bookingForm = this.fb.group({
      passengerName: ['', Validators.required],
      address: ['', Validators.required],
      email: ['', [Validators.required, Validators.email]],
      phoneNumber: ['', Validators.required],
      numSeats: ['', [Validators.required, Validators.min(1)]],
      seatNumbers: ['', Validators.required],
    });

    // Get selected flight
    const flightId = this.route.snapshot.paramMap.get('flightId');
    this.bookingService.getFlightDetails(flightId).subscribe((flight) => {
      this.selectedFlight = flight;
    });

    // Fetch logged-in user details
    this.authService.getCurrentUser().subscribe((user) => {
      this.currentUserId = user.id;
    });
  }

  submitBooking(): void {
    const bookingDetails = {
      ...this.bookingForm.value,
      flightId: this.selectedFlight.id,
      userId: this.currentUserId,
    };

    this.bookingService.createBooking(bookingDetails).subscribe({
      next: (response) => {
        this.successMessage = 'Booking successful!';
        this.snackBar.open('Booking created successfully!', 'Close', {
          duration: 3000,
        });
      },
      error: (error) => {
        this.snackBar.open('Failed to create booking. Please try again.', 'Close', {
          duration: 3000,
        });
      },
    });
  }

  viewMyBooking(): void {
    const bookingId = prompt('Enter your Booking ID:');
    this.bookingService.getBookingById(bookingId).subscribe({
      next: (booking) => {
        console.log(booking); // You can route to a detailed booking page here
      },
      error: () => {
        this.snackBar.open('Booking not found. Please check the Booking ID.', 'Close', {
          duration: 3000,
        });
      },
    });
  }
}

Service: booking.service.ts

import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';

@Injectable({
  providedIn: 'root',
})
export class BookingService {
  private apiUrl = 'http://localhost:8080/api'; // Update with actual backend URL

  constructor(private http: HttpClient) {}

  getFlightDetails(flightId: string): Observable<any> {
    return this.http.get(`${this.apiUrl}/flights/${flightId}`);
  }

  createBooking(booking: any): Observable<any> {
    return this.http.post(`${this.apiUrl}/bookings`, booking);
  }

  getBookingById(bookingId: string): Observable<any> {
    return this.http.get(`${this.apiUrl}/bookings/${bookingId}`);
  }
}

Service: auth.service.ts

import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';

@Injectable({
  providedIn: 'root',
})
export class AuthService {
  private apiUrl = 'http://localhost:8080/api'; // Update with actual backend URL

  constructor(private http: HttpClient) {}

  getCurrentUser(): Observable<any> {
    return this.http.get(`${this.apiUrl}/users/current`);
  }
}

Styling: flight-booking.component.css

.booking-container {
  width: 400px;
  margin: auto;
}

.full-width {
  width: 100%;
  margin-bottom: 15px;
}

.success-container {
  text-align: center;
  margin-top: 20px;
}

Routing

Add a route for the booking component in app-routing.module.ts:

{
  path: 'book/:flightId',
  component: FlightBookingComponent,
}

This setup dynamically fetches flight and user data, validates inputs, and shows success feedback. You can expand it further to include detailed booking views or navigations.